webpackJsonp([11],{0:function(e,t,a){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var r=a(3),s=i(r);a(1),a(105),Jsborya.ready(function(){new Vue({el:"#app",data:{searchValue:"",phoneType:0,isDelete:!1,isShowCitySearch:!0,windowHeight:500,isPullLoad:!0,isShow:!1,page:1,pageSize:20,userInfo:{},cardList:{list:[]},city:{cityName:"北京",cityCode:"110"}},created:function(){Jsborya.webviewLoading({isLoad:!1})},mounted:function(){this.initPage()},methods:{initPage:function(){var e=this,t=document.documentElement.clientHeight,a=document.documentElement.clientWidth;e.windowHeight=t;var i=Math.ceil((t-99)/45),r=a<=469?2:a<=719?3:4;e.pageSize=i*r;var s=e.getUrlParam("data");s&&(s=JSON.parse(BASE64.decode(s)),e.city=s,e.phoneType=s.phoneType||0,Jsborya.getUserInfo(function(t){e.userInfo=JSON.parse(BASE64.decode(t))}))},selectCity:function(){var e={cityName:this.city.cityName,cityCode:this.city.cityCode,title:"搜索号码"};e=BASE64.encode((0,s.default)(e)),Jsborya.pageJump({url:"city.html?data="+e+"&back=search",stepCode:"999",depiction:"选择城市"})},searchInputChange:function(){this.searchValue?this.isDelete=!0:this.isDelete=!1,11==this.searchValue.length&&this.searchCard(1)},searchCard:function(e,t){var a=this;a.page=e;var i=function(e){a.cardList.list=a.cardList.list.concat(e)};if(!a.searchValue||a.searchValue.length<2)return layer.open({content:"请输入2位及以上数字",skin:"msg",msgSkin:"error",time:4}),!1;var r={params:{phoneSegment:a.searchValue,page:e||1,cityCode:a.city.cityCode,pageSize:a.pageSize,phoneType:a.phoneType},userInfo:a.userInfo};a.AJAX("../../../eas/w/searchcard/searchNumber",r,function(e){a.isShow=!0,a.isPullLoad=!0,t?i(e.data.list):a.cardList=e.data},t)},selectCard:function(e,t,a){var i=this,r={params:{number:e,phoneType:a},userInfo:i.userInfo};return 2==a&&1==i.cardList.isNewVersion?(layer.open({title:"提示",content:'当前版本不支持选择<b class="purple">联通号码</b>，请更新到最新版本。',btn:["确定"]}),!1):void i.AJAX("../../../eas/w/searchcard/orderCreate",r,function(i){if("681"==i.code)layer.open({title:"提示",content:"当前有未处理订单，是否处理订单？",btn:["处理订单","取消"],yes:function(){Jsborya.pageBack({url:"index.html",isLoad:!0,depiction:"选号"})}});else{var r="";r=2==a?"unicomPackage.html?sysOrderId="+i.data.sysOrderId:"package.html?sysOrderId="+i.data.sysOrderId,Jsborya.pageJump({url:r,stepCode:"1000",depiction:"选择套餐",data:{createTime:i.data.createTime,sysOrderId:i.data.sysOrderId,cityName:t,privilegeType:i.data.privilegeType,orderStatusCode:"1000",cardType:a,phoneNumber:e}})}})},inputEmpty:function(){this.searchValue="",this.isDelete=!1},pullLoad:function(e){e.preventDefault();var t=this,a=t.page,i=document.getElementById("searchUl");t.isPullLoad&&i.scrollHeight<=i.scrollTop+i.offsetHeight&&(t.isPullLoad=!1,a++,t.searchCard(a,!0))}}})})},105:function(e,t){}});