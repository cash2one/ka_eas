webpackJsonp([3],{0:function(e,a,t){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var n=t(21),i=o(n);t(1),t(39),Jsborya.ready(function(){window.app=null,app=new Vue({el:"#app",data:{off:{package:0,pre:0,deductionUsed:!0,chargeType:"02",isShowNotes:!1},prestoreMoney:"",totalMoney:"",deductionMoney:"",payMoney:"",numberValue:"",packageInfo:{numberLevel:"1",sysOrderId:"000000000000000000",createTime:"00000",number:"0000000000",cityName:"--",numberValue:"0",packageMore:"0",deductionFee:"0",discountType:"2",package:[{title:"暂无套餐",code:"0",standard:"无",feeDescribe:"无",init:"0",selPackageMore:"0",prestoreMoneyList:[{title:"暂无优惠活动",prestoreMoney:"0",init:"0"}],prestoreDiscountList:{0:"10000"},selPackage:[{title:"暂无可选包",code:"0",standard:"无",feeDescribe:"无",init:"0"}]}]},prestoreMoneyList:[],selPackage:[],userInfo:{}},mounted:function(){this.initPage()},methods:{initPage:function(){var e=this;Jsborya.getUserInfo(function(a){e.userInfo=JSON.parse(BASE64.decode(a)),e.getList({type:0,package:"",selPackage:"",prestoreMoney:"",sysOrderId:e.getUrlParam("sysOrderId")||""},function(){Jsborya.webviewLoading({isLoad:!1})}),e.renderList()})},selectPackage:function(e){var a,t=this,o=e.target.name,n=e.target.parentNode.className;a="active"==n?["关闭"]:["选择","关闭"];var i=t.packageInfo.package[o];layer.open({content:'<div class="select-info"><dl><dt>套餐名称</dt><dd class="b">'+i.title+"</dd></dl><dl><dt>套餐介绍</dt><dd>"+i.info+"</dd></dl></div>",btn:a,type:1,style:"width:90%;max-width:540px;top:-30px;",yes:function(){""==n&&(t.off.package=o,t.siblingC(e.target),t.renderList()),layer.closeAll()},no:function(){layer.closeAll()}})},selectBag:function(e){var a,t=this,o=e.name,n=e.parentNode,i=t.packageInfo.package[t.off.package].selPackage[o];a=2==i.init?["关闭"]:"active"==n.className?["不选择","关闭"]:["选择","关闭"],layer.open({content:'<div class="select-info"><dl><dt>功能包名称</dt><dd class="b">'+i.title+"</dd></dl><dl><dt>功能包介绍</dt><dd>"+i.info+"</dd></dl></div>",btn:a,type:1,style:"width:90%;max-width:540px;top:-30px;",yes:function(){2!=i.init&&("active"==n.className?n.className="":n.className="active"),layer.closeAll()},no:function(){layer.closeAll()}})},selectPre:function(e){var a,t=this,o=e.name,n=e.parentNode.className,i="";a="active"==n?["关闭"]:["选择","关闭"],i=t.packageInfo.package[t.off.package].prestoreMoneyList[o].info,layer.open({title:"提示",content:i,btn:a,yes:function(){""==n&&(t.off.pre=e.name,t.siblingC(e),t.mathDeduction()),layer.closeAll()},no:function(){layer.closeAll()}})},chargeTypeShift:function(e){this.off.chargeType=e},makeSure:function(){var e=this;if("0000000000"==e.packageInfo.number)return!1;var a=e.getUrlParam("sysOrderId"),t=e.filterPreData(),o={params:{sysOrderId:a,prestoreMoney:e.packageInfo.package[e.off.package].prestoreMoneyList[e.off.pre].prestoreMoney,packageCode:e.packageInfo.package[e.off.package].code,selPackageCode:t,chargeType:e.off.chargeType,deductionType:e.off.deductionUsed?"1":"0"},userInfo:e.userInfo};e.AJAX("../../../eas/w/searchcard/SetCradInfo",o,function(a){Jsborya.isConnected(function(t){if(1==t){var o;Jsborya.pageJump({url:"",stepCode:"1001",depiction:"上传资料",data:(o={prestoreMoney:e.packageInfo.package[e.off.package].prestoreMoneyList[e.off.pre].prestoreMoney,totalMoney:parseInt(e.packageInfo.numberValue)+parseInt(e.packageInfo.package[e.off.package].prestoreMoneyList[e.off.pre].prestoreMoney),createTime:e.packageInfo.createTime,sysOrderId:e.packageInfo.sysOrderId,cityName:e.packageInfo.cityName,phoneNumber:e.packageInfo.number,actualMoney:a.data.actualMoney,cardMoney:a.data.cardMoney},(0,i.default)(o,"prestoreMoney",a.data.prestoreMoney),(0,i.default)(o,"totalMoney",a.data.totalMoney),(0,i.default)(o,"giveMoney",a.data.giveMoney),(0,i.default)(o,"deductMoney",a.data.deductMoney),(0,i.default)(o,"limitSimilarity",a.data.limitSimilarity),(0,i.default)(o,"orderStatusCode","1001"),(0,i.default)(o,"numberLevel",String(e.packageInfo.numberLevel)),(0,i.default)(o,"livingCheck",a.data.livingCheck),o)})}})})},filterPreData:function(){for(var e=this,a="",t=e.packageInfo.package[e.off.package].selPackage,o=document.getElementById("bagUl"),n=0;n<o.childNodes.length;n++)if(1===o.childNodes[n].nodeType&&""!=o.childNodes[n].className){o.childNodes[n].childNodes[0].name;a+=t[n].code+"|"}return a.substring(0,a.length-1)},getList:function(e,a){var t=this,o={params:e,userInfo:t.userInfo};t.AJAX("../../../eas/w/searchcard/getCradInfo",o,function(e){t.packageInfo=e.data;for(var a=0;a<e.data.package.length&&1!=e.data.package[a].init;a++);t.off.package=a,t.renderList()},a)},renderList:function(){for(var e=this,a="",t=document.getElementById("bagUl"),o=document.getElementById("preUl"),n=e.packageInfo.package[e.off.package],i=(2!=e.packageInfo.discountType,0),c=n.selPackage;i<c.length;i++)a+=1==c[i].init?'<li class="active">':2==c[i].init?'<li class="active active2">':"<li>",a+='<a onclick="app.selectBag(this)" name="'+i+'" href="javascript:void(0)">'+c[i].title+"</a></li>";1==n.selPackageMore&&(a+='<li><a href="javascript:void(0)" onclick="app.more(2)">查看更多</a></li>'),t.innerHTML=a,a="";for(var r=0,d=n.prestoreMoneyList;r<d.length;r++)1==d[r].init?(a+='<li class="active">',e.off.pre=r):a+="<li>",a+='<a onclick="app.selectPre(this)" name="'+r+'" href="javascript:void(0)">'+d[r].title+"</a></li>";o.innerHTML=a,a="",0==e.packageInfo.deductionFee?e.off.deductionUsed=!1:e.off.deductionUsed=!0,e.mathDeduction()},mathDeduction:function(e){var a,t,o,n,t,i=this,c=parseFloat(i.packageInfo.numberValue)/100;2!=i.packageInfo.discountType;a=parseFloat(i.packageInfo.package[i.off.package].prestoreMoneyList[i.off.pre].prestoreMoney)/100,t=(c+a).toFixed(2),c=c.toFixed(2),a=a.toFixed(2),e&&(i.off.deductionUsed?i.off.deductionUsed=!1:i.off.deductionUsed=!0),i.off.deductionUsed?(o=i.packageInfo.deductionFee>100*a?a:0<i.packageInfo.deductionFee<=100*a?(parseFloat(i.packageInfo.deductionFee)/100).toFixed(2):"0.00",n=(t-o).toFixed(2)):(o="0.00",n=t),i.prestoreMoney=a,i.numberValue=c,i.totalMoney=t,i.deductionMoney=o,i.payMoney=n},siblingC:function(e){for(var a=e.parentNode.parentNode,t=0;t<a.childNodes.length;t++)1===a.childNodes[t].nodeType&&(a.childNodes[t].className="");e.parentNode.className="active"},btnNotsClick:function(){var e=this;e.off.isShowNotes?e.off.isShowNotes=!1:e.off.isShowNotes=!0}}})})},20:function(e,a,t){e.exports={default:t(22),__esModule:!0}},21:function(e,a,t){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}a.__esModule=!0;var n=t(20),i=o(n);a.default=function(e,a,t){return a in e?(0,i.default)(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}},22:function(e,a,t){t(35);var o=t(2).Object;e.exports=function(e,a,t){return o.defineProperty(e,a,t)}},35:function(e,a,t){var o=t(12);o(o.S+o.F*!t(4),"Object",{defineProperty:t(6).f})},39:function(e,a){}});